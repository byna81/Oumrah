<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#1a5f47">
<title>Gestion Groupe Oumrah</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#1a1a1a url('https://images.unsplash.com/photo-1591604129939-f1efa4d9f7fa?w=1920&q=80') no-repeat center center;background-size:cover;background-attachment:fixed;min-height:100vh;padding-bottom:100px;position:relative}
body::before{content:'';position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(180deg,rgba(26,95,71,0.88) 0%,rgba(20,60,50,0.92) 50%,rgba(15,25,35,0.96) 100%);z-index:0}
.language-selector-screen{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(15,25,35,0.98);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;padding:20px}
.language-selector-screen .kaaba-icon{font-size:80px;margin-bottom:30px;animation:fadeIn 1s}
.language-selector-screen h1{color:#fff;font-size:28px;margin-bottom:15px;text-align:center}
.language-selector-screen p{color:#a0aec0;font-size:16px;margin-bottom:40px;text-align:center}
.lang-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;max-width:400px;width:100%}
.lang-option{background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border:2px solid rgba(255,255,255,0.2);border-radius:16px;padding:20px;cursor:pointer;transition:all 0.3s;display:flex;flex-direction:column;align-items:center;gap:10px}
.lang-option:hover,.lang-option:active{background:rgba(26,95,71,0.8);border-color:#1a5f47;transform:scale(1.05)}
.lang-option .flag{font-size:40px}
.lang-option .lang-name{color:#fff;font-size:16px;font-weight:600}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.container{max-width:600px;margin:0 auto;padding:20px;position:relative;z-index:1}
.card{background:rgba(30,40,50,0.95);backdrop-filter:blur(20px);border-radius:20px;padding:28px;box-shadow:0 10px 40px rgba(0,0,0,0.4);margin-bottom:20px;border:1px solid rgba(255,255,255,0.1)}
h1{color:#fff;font-size:28px;margin-bottom:10px;text-align:center;font-weight:700}
h2{color:#fff;font-size:22px;margin-bottom:15px;font-weight:700}
h3{color:#e2e8f0;font-size:18px;margin-bottom:10px;font-weight:600}
p{color:#cbd5e0;line-height:1.6;margin-bottom:10px}
button{width:100%;padding:16px;border:none;border-radius:14px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s;margin-bottom:10px}
.btn-primary{background:linear-gradient(135deg,#1a5f47 0%,#15b886 100%);color:white;box-shadow:0 8px 25px rgba(21,184,134,0.35)}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 12px 35px rgba(21,184,134,0.4)}
.btn-secondary{background:rgba(255,255,255,0.1);border:2px solid rgba(255,255,255,0.3);color:#fff}
.btn-small{width:auto;padding:10px 18px;font-size:14px;display:inline-block}
.btn-danger{background:linear-gradient(135deg,#c53030 0%,#9b2c2c 100%);color:white}
.btn-success{background:linear-gradient(135deg,#15b886 0%,#1a5f47 100%);color:white}
.btn-warning{background:linear-gradient(135deg,#ed8936 0%,#dd6b20 100%);color:white}
.btn-whatsapp{background:linear-gradient(135deg,#25D366 0%,#128C7E 100%);color:white;box-shadow:0 6px 20px rgba(37,211,102,0.4)}
input,select,textarea{width:100%;padding:14px 16px;border:2px solid rgba(255,255,255,0.2);border-radius:12px;font-size:16px;margin-bottom:15px;background:rgba(255,255,255,0.05);transition:all 0.3s;color:#fff}
input::placeholder,textarea::placeholder{color:#a0aec0}
textarea{min-height:100px;font-family:inherit}
input:focus,select:focus,textarea:focus{outline:none;border-color:#15b886;background:rgba(255,255,255,0.08)}
.hidden{display:none}
.tab-bar{background:rgba(30,40,50,0.98);backdrop-filter:blur(20px);position:sticky;top:0;z-index:100;display:flex;box-shadow:0 4px 20px rgba(0,0,0,0.3);overflow-x:auto}
.tab{flex:1;min-width:70px;padding:16px 12px;text-align:center;border:none;background:transparent;color:#a0aec0;font-weight:600;font-size:13px;border-bottom:3px solid transparent;cursor:pointer;white-space:nowrap;transition:all 0.3s}
.tab.active{color:#15b886;border-bottom-color:#15b886;background:rgba(21,184,134,0.1)}
.header{background:rgba(30,40,50,0.95);backdrop-filter:blur(20px);padding:28px;box-shadow:0 8px 30px rgba(0,0,0,0.3);margin-bottom:20px;border-radius:0 0 24px 24px;border:1px solid rgba(255,255,255,0.1)}
.profile-section{background:rgba(26,95,71,0.3);backdrop-filter:blur(10px);padding:24px;border-radius:20px;text-align:center;margin-bottom:20px;border:2px solid rgba(21,184,134,0.4)}
.profile-photo{width:110px;height:110px;border-radius:50%;background:linear-gradient(135deg,#1a5f47 0%,#15b886 100%);margin:0 auto 15px;display:flex;align-items:center;justify-content:center;color:white;font-size:42px;font-weight:bold;box-shadow:0 10px 35px rgba(21,184,134,0.4);overflow:hidden;border:4px solid rgba(255,255,255,0.2)}
.profile-photo img{width:100%;height:100%;object-fit:cover}
.icon-circle{width:64px;height:64px;background:linear-gradient(135deg,#1a5f47 0%,#15b886 100%);border-radius:50%;margin:0 auto 15px;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 25px rgba(21,184,134,0.35);border:3px solid rgba(255,255,255,0.2)}
.code-display{background:linear-gradient(135deg,rgba(26,95,71,0.8) 0%,rgba(21,184,134,0.7) 100%);padding:18px;border-radius:16px;text-align:center;font-family:'Courier New',monospace;font-size:28px;font-weight:bold;color:#fff;margin:15px 0;box-shadow:0 6px 20px rgba(0,0,0,0.3);border:2px solid rgba(21,184,134,0.5)}
.pilgrim-item,.message-item,.activity-item,.question-item,.rite-item{background:rgba(30,40,50,0.95);backdrop-filter:blur(10px);padding:18px;border-radius:16px;margin-bottom:12px;border:1px solid rgba(255,255,255,0.1);transition:all 0.3s;box-shadow:0 4px 15px rgba(0,0,0,0.3)}
.pilgrim-item:hover,.message-item:hover,.activity-item:hover,.question-item:hover,.rite-item:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.4);border-color:rgba(21,184,134,0.5)}
.rite-item.completed{border-color:#15b886;background:rgba(26,95,71,0.4)}
.rite-header{cursor:pointer;display:flex;align-items:center;transition:all 0.3s}
.rite-number{width:40px;height:40px;border-radius:12px;background:rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;font-weight:bold;color:#a0aec0;margin-right:15px;font-size:18px}
.rite-number.completed{background:linear-gradient(135deg,#15b886 0%,#1a5f47 100%);color:white}
.rite-content{padding:20px 0;margin-top:15px;border-top:2px solid rgba(255,255,255,0.1)}
.badge{display:inline-block;padding:6px 14px;border-radius:20px;font-size:12px;font-weight:600;margin:5px 5px 5px 0}
.badge-present{background:rgba(21,184,134,0.2);color:#15b886;border:1px solid #15b886}
.badge-absent{background:rgba(197,48,48,0.2);color:#ef4444;border:1px solid #c53030}
.badge-info{background:rgba(21,184,134,0.2);color:#15b886}
.badge-warning{background:rgba(237,137,54,0.2);color:#ed8936}
.badge-success{background:rgba(21,184,134,0.2);color:#15b886}
.progress-bar{width:100%;height:12px;background:rgba(255,255,255,0.1);border-radius:10px;overflow:hidden;margin:10px 0}
.progress-fill{height:100%;background:linear-gradient(90deg,#1a5f47 0%,#15b886 100%);border-radius:10px;transition:width 0.5s}
.dua-box{background:rgba(26,95,71,0.2);padding:18px;border-radius:14px;margin:12px 0;border-left:4px solid #15b886}
.arabic-text{font-size:22px;font-weight:600;color:#fff;text-align:right;line-height:1.8;margin:12px 0}
.phonetic-text{font-style:italic;color:#cbd5e0;font-size:15px;line-height:1.6}
.translation-text{color:#a0aec0;font-size:15px;line-height:1.6}
.counter-circle{width:140px;height:140px;border-radius:50%;background:linear-gradient(135deg,rgba(26,95,71,0.8) 0%,rgba(21,184,134,0.6) 100%);margin:20px auto;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 35px rgba(21,184,134,0.3);border:6px solid rgba(255,255,255,0.2)}
.counter-number{font-size:56px;font-weight:bold;color:#fff}
.success-box{background:rgba(21,184,134,0.2);padding:20px;border-radius:16px;text-align:center;margin:15px 0;border:2px solid #15b886}
.success-text{font-size:18px;font-weight:bold;color:#15b886}
.flex-between{display:flex;justify-content:space-between;align-items:center;gap:10px}
.flex-row{display:flex;gap:10px;flex-wrap:wrap}
ol{margin-left:24px;margin-bottom:16px;color:#cbd5e0}
ol li{margin-bottom:10px;line-height:1.6}
.status-online{color:#15b886}
.status-offline{color:#a0aec0}
.message-time{font-size:12px;color:#718096;margin-top:8px}
.checkbox-item{display:flex;align-items:center;padding:12px;background:rgba(26,95,71,0.2);border-radius:12px;margin-bottom:8px;border:2px solid rgba(255,255,255,0.1);transition:all 0.3s}
.checkbox-item:hover{border-color:rgba(21,184,134,0.5);background:rgba(26,95,71,0.3)}
.checkbox-item input[type="checkbox"]{margin-right:12px;width:20px;height:20px;cursor:pointer}
.checkbox-item span{flex:1;font-weight:500;color:#cbd5e0}
.guide-location-card{background:rgba(59,130,246,0.2);border:2px solid #3b82f6;border-radius:18px;padding:24px;margin-bottom:20px}
.distance-display{font-size:36px;font-weight:bold;color:#60a5fa;text-align:center;margin:12px 0}
.map-placeholder{background:linear-gradient(135deg,rgba(26,95,71,0.3) 0%,rgba(21,184,134,0.2) 100%);height:220px;border-radius:18px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;border:2px solid #15b886;box-shadow:0 8px 30px rgba(21,184,134,0.2)}
.question-response{background:rgba(21,184,134,0.2);padding:14px;border-radius:12px;margin-top:12px;border-left:4px solid #15b886}
</style>
</head>
<body>
<div id="app"></div>
<script>
let S={lang:null,userType:null,userName:'',userPhoto:null,userHotel:'',userRoom:'',pilgrimCode:'',groupCode:'',groupName:'',currentGroup:null,activeTab:'rites',expandedRite:null,tawafCount:0,saiCount:0,messages:[],pilgrims:[],activities:[],questions:[],completedSteps:{},pilgrimPresence:{},guideLocation:{lat:21.4225,lng:39.8262},showAddMessage:false,showAddPilgrim:false,showAddActivity:false,showAskQuestion:false,showEditPilgrim:false,editPilgrimId:null,viewPilgrimProgress:null,viewQuestions:false,showLangSelector:true};
let L=localStorage.getItem('appLang')||null;
if(L)S.lang=L,S.showLangSelector=false;
const T={fr:{appTitle:"Gestion Groupe Oumrah",welcome:"Bienvenue",selectLanguage:"Choisissez votre langue",continue:"Continuer",guide:"Guide",pilgrims:"PÃ¨lerins",userType:"Choisissez votre rÃ´le",enterName:"Entrez votre nom complet",uploadPhoto:"Ajouter une photo (optionnel)",create:"CrÃ©er un groupe",join:"Rejoindre",enterCode:"Entrez le code du groupe",yourCode:"Votre code de groupe :",shareCode:"Partagez ce code avec vos pÃ¨lerins",rites:"Rites",detailedGuide:"Guide dÃ©taillÃ©",messages:"Messages",rooms:"Chambres",map:"Carte",presence:"PrÃ©sence",progress:"Progression",guideLocation:"Localisation Guide",activities:"ActivitÃ©s",questions:"Questions au Guide",steps:"Ã‰tapes",invocation:"Invocation",phonetic:"PhonÃ©tique",translation:"Traduction",counter:"Compteur",round:"Tour",trip:"Trajet",reset:"RÃ©initialiser",tawafComplete:"Tawaf terminÃ© ! 7 tours accomplis âœ“",saiComplete:"Sa'i terminÃ© ! 7 trajets accomplis âœ“",back:"â† Retour",addMessage:"Nouveau message",messageTitle:"Titre du message",messageContent:"Contenu du message",send:"Envoyer",cancel:"Annuler",noMessages:"Aucun message pour le moment",addPilgrim:"Ajouter un pÃ¨lerin",pilgrimName:"Nom du pÃ¨lerin",roomNumber:"NumÃ©ro de chambre",hotel:"HÃ´tel",floor:"Ã‰tage",save:"Enregistrer",noPilgrims:"Aucun pÃ¨lerin enregistrÃ©",room:"Chambre",online:"En ligne",offline:"Hors ligne",addActivity:"Nouvelle activitÃ©",activityName:"Nom de l'activitÃ©",activityLocation:"Lieu",activityTime:"Heure",noActivities:"Aucune activitÃ© planifiÃ©e",markPresence:"Marquer les prÃ©sences",present:"PrÃ©sent",absent:"Absent",presenceCount:"prÃ©sents",delete:"Supprimer",myProgress:"Ma progression",completed:"âœ“ TerminÃ©",notStarted:"Pas commencÃ©",markComplete:"Marquer comme terminÃ©",viewProgress:"Voir la progression",pilgrimProgress:"Progression du pÃ¨lerin",of:"sur",stepsCompleted:"Ã©tapes terminÃ©es",guideDistance:"Distance du guide",meters:"mÃ¨tres",findGuide:"Localiser le guide",askQuestion:"Poser une question",questionPlaceholder:"DÃ©crivez votre problÃ¨me ou question...",yourQuestions:"Vos questions",noQuestions:"Aucune question posÃ©e",awaitingResponse:"En attente de rÃ©ponse",answered:"RÃ©pondu",validatePresence:"Valider ma prÃ©sence",presenceValidated:"âœ“ PrÃ©sence validÃ©e",myActivities:"Mes activitÃ©s",answer:"RÃ©pondre",response:"RÃ©ponse",pilgrimsQuestions:"Questions des pÃ¨lerins",groupName:"Nom du groupe",enterGroupName:"Ex: Oumrah Janvier 2026",sendWhatsApp:"Envoyer sur WhatsApp",edit:"Modifier",codesSent:"Codes envoyÃ©s"},en:{appTitle:"Umrah Group Management",welcome:"Welcome",selectLanguage:"Choose your language",continue:"Continue",guide:"Guide",pilgrims:"Pilgrims",userType:"Choose your role",enterName:"Enter your full name",uploadPhoto:"Add photo (optional)",create:"Create group",join:"Join",enterCode:"Enter group code",yourCode:"Your group code:",shareCode:"Share this code with your pilgrims",rites:"Rites",detailedGuide:"Detailed Guide",messages:"Messages",rooms:"Rooms",map:"Map",presence:"Attendance",progress:"Progress",guideLocation:"Guide Location",activities:"Activities",questions:"Questions to Guide",steps:"Steps",invocation:"Invocation",phonetic:"Phonetic",translation:"Translation",counter:"Counter",round:"Round",trip:"Trip",reset:"Reset",tawafComplete:"Tawaf completed! 7 rounds done âœ“",saiComplete:"Sa'i completed! 7 trips done âœ“",back:"â† Back",addMessage:"New message",messageTitle:"Message title",messageContent:"Message content",send:"Send",cancel:"Cancel",noMessages:"No messages yet",addPilgrim:"Add pilgrim",pilgrimName:"Pilgrim name",roomNumber:"Room number",hotel:"Hotel",floor:"Floor",save:"Save",noPilgrims:"No pilgrims registered",room:"Room",online:"Online",offline:"Offline",addActivity:"New activity",activityName:"Activity name",activityLocation:"Location",activityTime:"Time",noActivities:"No activities planned",markPresence:"Mark attendance",present:"Present",absent:"Absent",presenceCount:"present",delete:"Delete",myProgress:"My progress",completed:"âœ“ Completed",notStarted:"Not started",markComplete:"Mark as completed",viewProgress:"View progress",pilgrimProgress:"Pilgrim progress",of:"of",stepsCompleted:"steps completed",guideDistance:"Distance to guide",meters:"meters",findGuide:"Find guide",askQuestion:"Ask question",questionPlaceholder:"Describe your issue or question...",yourQuestions:"Your questions",noQuestions:"No questions asked",awaitingResponse:"Awaiting response",answered:"Answered",validatePresence:"Validate my presence",presenceValidated:"âœ“ Presence validated",myActivities:"My activities",answer:"Answer",response:"Response",pilgrimsQuestions:"Pilgrims questions",groupName:"Group name",enterGroupName:"Ex: Umrah January 2026",sendWhatsApp:"Send on WhatsApp",edit:"Edit",codesSent:"Codes sent"},ar:{appTitle:"Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø¹Ù…Ø±Ø©",welcome:"Ù…Ø±Ø­Ø¨Ø§Ù‹",selectLanguage:"Ø§Ø®ØªØ± Ù„ØºØªÙƒ",continue:"Ù…ØªØ§Ø¨Ø¹Ø©",guide:"Ù…Ø±Ø´Ø¯",pilgrims:"Ø§Ù„Ø­Ø¬Ø§Ø¬",userType:"Ø§Ø®ØªØ± Ø¯ÙˆØ±Ùƒ",enterName:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„",uploadPhoto:"Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",create:"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø©",join:"Ø§Ù†Ø¶Ù…Ø§Ù…",enterCode:"Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©",yourCode:"Ø±Ù…Ø² Ù…Ø¬Ù…ÙˆØ¹ØªÙƒ:",shareCode:"Ø´Ø§Ø±Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù…Ø¹ Ø§Ù„Ø­Ø¬Ø§Ø¬",rites:"Ø§Ù„Ù…Ù†Ø§Ø³Ùƒ",detailedGuide:"Ø¯Ù„ÙŠÙ„ Ù…ÙØµÙ„",messages:"Ø§Ù„Ø±Ø³Ø§Ø¦Ù„",rooms:"Ø§Ù„ØºØ±Ù",map:"Ø§Ù„Ø®Ø±ÙŠØ·Ø©",presence:"Ø§Ù„Ø­Ø¶ÙˆØ±",progress:"Ø§Ù„ØªÙ‚Ø¯Ù…",guideLocation:"Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø±Ø´Ø¯",activities:"Ø§Ù„Ø£Ù†Ø´Ø·Ø©",questions:"Ø£Ø³Ø¦Ù„Ø© Ù„Ù„Ù…Ø±Ø´Ø¯",steps:"Ø§Ù„Ø®Ø·ÙˆØ§Øª",invocation:"Ø§Ù„Ø¯Ø¹Ø§Ø¡",phonetic:"Ø§Ù„Ù†Ø·Ù‚",translation:"Ø§Ù„ØªØ±Ø¬Ù…Ø©",counter:"Ø§Ù„Ø¹Ø¯Ø§Ø¯",round:"Ø§Ù„Ø´ÙˆØ·",trip:"Ø§Ù„Ù…Ø³Ø¹Ù‰",reset:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†",tawafComplete:"Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø·ÙˆØ§Ù! 7 Ø£Ø´ÙˆØ§Ø· âœ“",saiComplete:"Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø³Ø¹ÙŠ! 7 Ø£Ø´ÙˆØ§Ø· âœ“",back:"â† Ø±Ø¬ÙˆØ¹",addMessage:"Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©",messageTitle:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©",messageContent:"Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©",send:"Ø¥Ø±Ø³Ø§Ù„",cancel:"Ø¥Ù„ØºØ§Ø¡",noMessages:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„",addPilgrim:"Ø¥Ø¶Ø§ÙØ© Ø­Ø§Ø¬",pilgrimName:"Ø§Ø³Ù… Ø§Ù„Ø­Ø§Ø¬",roomNumber:"Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ©",hotel:"Ø§Ù„ÙÙ†Ø¯Ù‚",floor:"Ø§Ù„Ø·Ø§Ø¨Ù‚",save:"Ø­ÙØ¸",noPilgrims:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø¬Ø§Ø¬ Ù…Ø³Ø¬Ù„ÙŠÙ†",room:"ØºØ±ÙØ©",online:"Ù…ØªØµÙ„",offline:"ØºÙŠØ± Ù…ØªØµÙ„",addActivity:"Ù†Ø´Ø§Ø· Ø¬Ø¯ÙŠØ¯",activityName:"Ø§Ø³Ù… Ø§Ù„Ù†Ø´Ø§Ø·",activityLocation:"Ø§Ù„Ù…ÙˆÙ‚Ø¹",activityTime:"Ø§Ù„ÙˆÙ‚Øª",noActivities:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ø´Ø·Ø©",markPresence:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±",present:"Ø­Ø§Ø¶Ø±",absent:"ØºØ§Ø¦Ø¨",presenceCount:"Ø­Ø§Ø¶Ø±ÙˆÙ†",delete:"Ø­Ø°Ù",myProgress:"ØªÙ‚Ø¯Ù…ÙŠ",completed:"âœ“ Ù…ÙƒØªÙ…Ù„",notStarted:"Ù„Ù… ÙŠØ¨Ø¯Ø£",markComplete:"ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© Ù…ÙƒØªÙ…Ù„",viewProgress:"Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯Ù…",pilgrimProgress:"ØªÙ‚Ø¯Ù… Ø§Ù„Ø­Ø§Ø¬",of:"Ù…Ù†",stepsCompleted:"Ø®Ø·ÙˆØ§Øª Ù…ÙƒØªÙ…Ù„Ø©",guideDistance:"Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ù…Ø±Ø´Ø¯",meters:"Ù…ØªØ±",findGuide:"Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø´Ø¯",askQuestion:"Ø·Ø±Ø­ Ø³Ø¤Ø§Ù„",questionPlaceholder:"Ø§Ø´Ø±Ø­ Ù…Ø´ÙƒÙ„ØªÙƒ Ø£Ùˆ Ø³Ø¤Ø§Ù„Ùƒ...",yourQuestions:"Ø£Ø³Ø¦Ù„ØªÙƒ",noQuestions:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø©",awaitingResponse:"ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯",answered:"ØªÙ… Ø§Ù„Ø±Ø¯",validatePresence:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ±",presenceValidated:"âœ“ ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ±",myActivities:"Ø£Ù†Ø´Ø·ØªÙŠ",answer:"Ø§Ù„Ø±Ø¯",response:"Ø§Ù„Ø±Ø¯",pilgrimsQuestions:"Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø­Ø¬Ø§Ø¬",groupName:"Ø§Ø³Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©",enterGroupName:"Ù…Ø«Ø§Ù„: Ø¹Ù…Ø±Ø© ÙŠÙ†Ø§ÙŠØ± 2026",sendWhatsApp:"Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",edit:"ØªØ¹Ø¯ÙŠÙ„",codesSent:"ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…ÙˆØ²"}};
const RITES={fr:[{id:1,title:"Ihram",description:"Ã‰tat de sacralisation avant les rites",steps:["Se purifier avec le ghusl (bain rituel complet)","Porter les vÃªtements spÃ©cifiques d'Ihram (2 piÃ¨ces blanches non cousues pour hommes)","Formuler l'intention (niyyah) d'accomplir la Oumrah","RÃ©citer la Talbiyah : Labbayka AllÄhumma labbayk"],dua:{arabic:"Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙØŒ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙƒÙ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ",phonetic:"Labbayka AllÄhumma labbayk, labbayka lÄ sharÄ«ka laka labbayk",translation:"Me voici, Ã” Allah, me voici. Tu n'as pas d'associÃ©, me voici"}},{id:2,title:"Tawaf",description:"7 circumambulations autour de la Kaaba",steps:["Commencer au niveau de la Pierre Noire (Hajar al-Aswad)","Effectuer 7 tours complets autour de la Kaaba dans le sens antihoraire","Toucher ou pointer la Pierre Noire Ã  chaque passage si possible","RÃ©citer des invocations et glorifications d'Allah pendant le Tawaf"],dua:{arabic:"Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù ÙˆÙÙ„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„Ù‡Ù ÙˆÙØ§Ù„Ù„Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù",phonetic:"Subá¸¥Äna LlÄh, wa l-á¸¥amdu li-LlÄh, wa lÄ ilÄha illa LlÄh, wa LlÄhu akbar",translation:"Gloire Ã  Allah, louange Ã  Allah, il n'y a de divinitÃ© qu'Allah, et Allah est le plus Grand"}},{id:3,title:"PriÃ¨re de deux unitÃ©s",description:"PriÃ¨re derriÃ¨re le Maqam d'Ibrahim",steps:["Se diriger vers le Maqam Ibrahim (station d'Ibrahim)","Accomplir deux unitÃ©s de priÃ¨re (rak'at)","RÃ©citer la sourate Al-Kafirun dans la premiÃ¨re rak'at","RÃ©citer la sourate Al-Ikhlas dans la deuxiÃ¨me rak'at"],dua:{arabic:"Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ ØªÙÙ‚ÙØ¨ÙÙ‘Ù„Ù’ Ù…ÙÙ†ÙÙ‘Ø§ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø£ÙÙ†Ù’ØªÙ Ø§Ù„Ø³ÙÙ‘Ù…ÙÙŠØ¹Ù Ø§Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù",phonetic:"RabbanÄ taqabbal minnÄ innaka anta s-samÄ«'u l-'alÄ«m",translation:"Notre Seigneur, accepte de nous, Tu es Celui qui entend et qui sait tout"}},{id:4,title:"Sa'i",description:"7 allers-retours entre Safa et Marwa",steps:["Monter sur le mont Safa et faire face Ã  la Kaaba","RÃ©citer le verset : 'Inna-s-safa wa-l-marwata min cha'aa-iri Llahi'","RÃ©citer le Takbir et faire des invocations (3 fois)","Descendre et marcher normalement vers Marwa","Entre les deux marqueurs verts, accÃ©lÃ©rer le pas (pour les hommes)","Monter sur Marwa, rÃ©citer les mÃªmes invocations","RÃ©pÃ©ter ce trajet 7 fois (Safa-Marwa compte pour 1)"],dua:{arabic:"Ø¥ÙÙ†ÙÙ‘ Ø§Ù„ØµÙÙ‘ÙÙØ§ ÙˆÙØ§Ù„Ù’Ù…ÙØ±Ù’ÙˆÙØ©Ù Ù…ÙÙ†Ù’ Ø´ÙØ¹ÙØ§Ø¦ÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙÙÙ…ÙÙ†Ù’ Ø­ÙØ¬ÙÙ‘ Ø§Ù„Ù’Ø¨ÙÙŠÙ’ØªÙ Ø£ÙÙˆÙ Ø§Ø¹Ù’ØªÙÙ…ÙØ±Ù ÙÙÙ„ÙØ§ Ø¬ÙÙ†ÙØ§Ø­Ù Ø¹ÙÙ„ÙÙŠÙ’Ù‡Ù Ø£ÙÙ†Ù’ ÙŠÙØ·ÙÙ‘ÙˆÙÙ‘ÙÙ Ø¨ÙÙ‡ÙÙ…ÙØ§",phonetic:"Inna-s-safa wa-l-marwata min cha'aa-iri Llahi, fa-man hajja l-bayta aw i'tamara fa-lÄ junÄha 'alayhi an yattawwafa bi-himÄ",translation:"Safa et Marwa font partie des rites prescrits par Allah. Celui qui fait le pÃ¨lerinage ou la Oumrah ne commet pas de pÃ©chÃ© en faisant le va-et-vient entre ces deux monts"}},{id:5,title:"Taqsir ou Halq",description:"Raccourcir ou raser les cheveux",steps:["Les hommes peuvent choisir de raser complÃ¨tement (Halq) ou de raccourcir (Taqsir)","Les femmes coupent l'Ã©quivalent d'une phalange (bout du doigt) de leurs cheveux","Ceci marque officiellement la fin de la Oumrah","L'Ã©tat d'Ihram prend fin et les interdictions sont levÃ©es"],dua:{arabic:"Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ù‚ÙØ¶ÙÙ‰ Ø¹ÙÙ†ÙÙ‘Ø§ Ù†ÙØ³ÙÙƒÙÙ†ÙØ§",phonetic:"Al-á¸¥amdu li-LlÄhi lladhÄ« qaá¸Ä 'annÄ nusukanÄ",translation:"Louange Ã  Allah qui nous a permis d'accomplir nos rites"}}],en:[{id:1,title:"Ihram",description:"State of consecration before rites",steps:["Perform purification with ghusl (complete ritual bath)","Wear specific Ihram clothing (2 unstitched white pieces for men)","Make intention (niyyah) to perform Umrah","Recite the Talbiyah: Labbayka AllÄhumma labbayk"],dua:{arabic:"Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙØŒ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙƒÙ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ",phonetic:"Labbayka AllÄhumma labbayk, labbayka lÄ sharÄ«ka laka labbayk",translation:"Here I am, O Allah, here I am. You have no partner, here I am"}},{id:2,title:"Tawaf",description:"7 circumambulations around Kaaba",steps:["Start at the Black Stone (Hajar al-Aswad)","Perform 7 complete circles around the Kaaba counterclockwise","Touch or point to the Black Stone at each passage if possible","Recite invocations and glorifications of Allah during Tawaf"],dua:{arabic:"Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù ÙˆÙÙ„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„Ù‡Ù ÙˆÙØ§Ù„Ù„Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù",phonetic:"Subá¸¥Äna LlÄh, wa l-á¸¥amdu li-LlÄh, wa lÄ ilÄha illa LlÄh, wa LlÄhu akbar",translation:"Glory be to Allah, praise be to Allah, there is no deity but Allah, and Allah is the Greatest"}},{id:3,title:"Two units prayer",description:"Prayer behind Maqam Ibrahim",steps:["Go to Maqam Ibrahim (Station of Ibrahim)","Perform two units of prayer (rak'at)","Recite Surah Al-Kafirun in the first rak'at","Recite Surah Al-Ikhlas in the second rak'at"],dua:{arabic:"Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ ØªÙÙ‚ÙØ¨ÙÙ‘Ù„Ù’ Ù…ÙÙ†ÙÙ‘Ø§ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø£ÙÙ†Ù’ØªÙ Ø§Ù„Ø³ÙÙ‘Ù…ÙÙŠØ¹Ù Ø§Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù",phonetic:"RabbanÄ taqabbal minnÄ innaka anta s-samÄ«'u l-'alÄ«m",translation:"Our Lord, accept from us, You are the All-Hearing, the All-Knowing"}},{id:4,title:"Sa'i",description:"7 trips between Safa and Marwa",steps:["Climb mount Safa and face the Kaaba","Recite the verse: 'Inna-s-safa wa-l-marwata min cha'aa-iri Llahi'","Recite Takbir and make supplications (3 times)","Descend and walk normally towards Marwa","Between the two green markers, quicken pace (for men)","Climb Marwa, recite the same supplications","Repeat this route 7 times (Safa-Marwa counts as 1)"],dua:{arabic:"Ø¥ÙÙ†ÙÙ‘ Ø§Ù„ØµÙÙ‘ÙÙØ§ ÙˆÙØ§Ù„Ù’Ù…ÙØ±Ù’ÙˆÙØ©Ù Ù…ÙÙ†Ù’ Ø´ÙØ¹ÙØ§Ø¦ÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙÙÙ…ÙÙ†Ù’ Ø­ÙØ¬ÙÙ‘ Ø§Ù„Ù’Ø¨ÙÙŠÙ’ØªÙ Ø£ÙÙˆÙ Ø§Ø¹Ù’ØªÙÙ…ÙØ±Ù ÙÙÙ„ÙØ§ Ø¬ÙÙ†ÙØ§Ø­Ù Ø¹ÙÙ„ÙÙŠÙ’Ù‡Ù Ø£ÙÙ†Ù’ ÙŠÙØ·ÙÙ‘ÙˆÙÙ‘ÙÙ Ø¨ÙÙ‡ÙÙ…ÙØ§",phonetic:"Inna-s-safa wa-l-marwata min cha'aa-iri Llahi, fa-man hajja l-bayta aw i'tamara fa-lÄ junÄha 'alayhi an yattawwafa bi-himÄ",translation:"Indeed, Safa and Marwa are among the symbols of Allah. Whoever makes pilgrimage to the House or performs Umrah commits no sin by walking between them"}},{id:5,title:"Taqsir or Halq",description:"Shortening or shaving hair",steps:["Men can choose to completely shave (Halq) or shorten (Taqsir)","Women cut the equivalent of a fingertip length of their hair","This officially marks the end of Umrah","The state of Ihram ends and prohibitions are lifted"],dua:{arabic:"Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ù‚ÙØ¶ÙÙ‰ Ø¹ÙÙ†ÙÙ‘Ø§ Ù†ÙØ³ÙÙƒÙÙ†ÙØ§",phonetic:"Al-á¸¥amdu li-LlÄhi lladhÄ« qaá¸Ä 'annÄ nusukanÄ",translation:"Praise be to Allah who enabled us to complete our rites"}}],ar:[{id:1,title:"Ø§Ù„Ø¥Ø­Ø±Ø§Ù…",description:"Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ³ Ù‚Ø¨Ù„ Ø§Ù„Ù…Ù†Ø§Ø³Ùƒ",steps:["Ø§Ù„ØªØ·Ù‡Ø± Ø¨Ø§Ù„ØºØ³Ù„ Ø§Ù„ÙƒØ§Ù…Ù„","Ø§Ø±ØªØ¯Ø§Ø¡ Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø¥Ø­Ø±Ø§Ù… (Ù‚Ø·Ø¹ØªØ§Ù† Ø¨ÙŠØ¶Ø§Ø¡ ØºÙŠØ± Ù…Ø®ÙŠØ·Ø© Ù„Ù„Ø±Ø¬Ø§Ù„)","Ø§Ù„Ù†ÙŠØ© Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¹Ù…Ø±Ø©","Ø§Ù„ØªÙ„Ø¨ÙŠØ©: Ù„Ø¨ÙŠÙƒ Ø§Ù„Ù„Ù‡Ù… Ù„Ø¨ÙŠÙƒ"],dua:{arabic:"Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙØŒ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙƒÙ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ",phonetic:"Labbayka AllÄhumma labbayk, labbayka lÄ sharÄ«ka laka labbayk",translation:"Ù„Ø¨ÙŠÙƒ Ø§Ù„Ù„Ù‡Ù… Ù„Ø¨ÙŠÙƒØŒ Ù„Ø¨ÙŠÙƒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ùƒ Ù„Ø¨ÙŠÙƒ"}},{id:2,title:"Ø§Ù„Ø·ÙˆØ§Ù",description:"7 Ø£Ø´ÙˆØ§Ø· Ø­ÙˆÙ„ Ø§Ù„ÙƒØ¹Ø¨Ø©",steps:["Ø§Ù„Ø¨Ø¯Ø¡ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø¬Ø± Ø§Ù„Ø£Ø³ÙˆØ¯","Ø§Ù„Ø·ÙˆØ§Ù 7 Ø£Ø´ÙˆØ§Ø· ÙƒØ§Ù…Ù„Ø© Ø¹ÙƒØ³ Ø¹Ù‚Ø§Ø±Ø¨ Ø§Ù„Ø³Ø§Ø¹Ø©","Ù„Ù…Ø³ Ø£Ùˆ Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ù„Ù„Ø­Ø¬Ø± Ø§Ù„Ø£Ø³ÙˆØ¯ Ø¹Ù†Ø¯ ÙƒÙ„ Ù…Ø±ÙˆØ±","Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© ÙˆØ§Ù„ØªØ³Ø¨ÙŠØ­ Ø®Ù„Ø§Ù„ Ø§Ù„Ø·ÙˆØ§Ù"],dua:{arabic:"Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù ÙˆÙÙ„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„Ù‡Ù ÙˆÙØ§Ù„Ù„Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù",phonetic:"Subá¸¥Äna LlÄh, wa l-á¸¥amdu li-LlÄh, wa lÄ ilÄha illa LlÄh, wa LlÄhu akbar",translation:"Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ ÙˆÙ„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±"}},{id:3,title:"ØµÙ„Ø§Ø© Ø±ÙƒØ¹ØªÙŠÙ†",description:"Ø§Ù„ØµÙ„Ø§Ø© Ø®Ù„Ù Ù…Ù‚Ø§Ù… Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…",steps:["Ø§Ù„ØªÙˆØ¬Ù‡ Ø¥Ù„Ù‰ Ù…Ù‚Ø§Ù… Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…","ØµÙ„Ø§Ø© Ø±ÙƒØ¹ØªÙŠÙ†","Ù‚Ø±Ø§Ø¡Ø© Ø³ÙˆØ±Ø© Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ† ÙÙŠ Ø§Ù„Ø±ÙƒØ¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰","Ù‚Ø±Ø§Ø¡Ø© Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ ÙÙŠ Ø§Ù„Ø±ÙƒØ¹Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©"],dua:{arabic:"Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ ØªÙÙ‚ÙØ¨ÙÙ‘Ù„Ù’ Ù…ÙÙ†ÙÙ‘Ø§ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø£ÙÙ†Ù’ØªÙ Ø§Ù„Ø³ÙÙ‘Ù…ÙÙŠØ¹Ù Ø§Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù",phonetic:"RabbanÄ taqabbal minnÄ innaka anta s-samÄ«'u l-'alÄ«m",translation:"Ø±Ø¨Ù†Ø§ ØªÙ‚Ø¨Ù„ Ù…Ù†Ø§ Ø¥Ù†Ùƒ Ø£Ù†Øª Ø§Ù„Ø³Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù„ÙŠÙ…"}},{id:4,title:"Ø§Ù„Ø³Ø¹ÙŠ",description:"7 Ø£Ø´ÙˆØ§Ø· Ø¨ÙŠÙ† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ©",steps:["Ø§Ù„ØµØ¹ÙˆØ¯ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ§ ÙˆÙ…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙƒØ¹Ø¨Ø©","ØªÙ„Ø§ÙˆØ© Ø§Ù„Ø¢ÙŠØ©: Ø¥Ù† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ© Ù…Ù† Ø´Ø¹Ø§Ø¦Ø± Ø§Ù„Ù„Ù‡","Ø§Ù„ØªÙƒØ¨ÙŠØ± ÙˆØ§Ù„Ø¯Ø¹Ø§Ø¡ (3 Ù…Ø±Ø§Øª)","Ø§Ù„Ù†Ø²ÙˆÙ„ ÙˆØ§Ù„Ù…Ø´ÙŠ Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ù†Ø­Ùˆ Ø§Ù„Ù…Ø±ÙˆØ©","Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù„Ø§Ù…ØªÙŠÙ† Ø§Ù„Ø®Ø¶Ø±Ø§ÙˆÙŠÙ†ØŒ Ø§Ù„Ø¥Ø³Ø±Ø§Ø¹ (Ù„Ù„Ø±Ø¬Ø§Ù„)","Ø§Ù„ØµØ¹ÙˆØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø±ÙˆØ© ÙˆØªÙƒØ±Ø§Ø± Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©","ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…Ø³Ø§Ø± 7 Ù…Ø±Ø§Øª (Ø§Ù„ØµÙØ§-Ø§Ù„Ù…Ø±ÙˆØ© = 1)"],dua:{arabic:"Ø¥ÙÙ†ÙÙ‘ Ø§Ù„ØµÙÙ‘ÙÙØ§ ÙˆÙØ§Ù„Ù’Ù…ÙØ±Ù’ÙˆÙØ©Ù Ù…ÙÙ†Ù’ Ø´ÙØ¹ÙØ§Ø¦ÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙÙÙ…ÙÙ†Ù’ Ø­ÙØ¬ÙÙ‘ Ø§Ù„Ù’Ø¨ÙÙŠÙ’ØªÙ Ø£ÙÙˆÙ Ø§Ø¹Ù’ØªÙÙ…ÙØ±Ù ÙÙÙ„ÙØ§ Ø¬ÙÙ†ÙØ§Ø­Ù Ø¹ÙÙ„ÙÙŠÙ’Ù‡Ù Ø£ÙÙ†Ù’ ÙŠÙØ·ÙÙ‘ÙˆÙÙ‘ÙÙ Ø¨ÙÙ‡ÙÙ…ÙØ§",phonetic:"Inna-s-safa wa-l-marwata min cha'aa-iri Llahi",translation:"Ø¥Ù† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ© Ù…Ù† Ø´Ø¹Ø§Ø¦Ø± Ø§Ù„Ù„Ù‡"}},{id:5,title:"Ø§Ù„ØªÙ‚ØµÙŠØ± Ø£Ùˆ Ø§Ù„Ø­Ù„Ù‚",description:"Ù‚Øµ Ø£Ùˆ Ø­Ù„Ù‚ Ø§Ù„Ø´Ø¹Ø±",steps:["Ø§Ù„Ø±Ø¬Ø§Ù„ ÙŠØ®ØªØ§Ø±ÙˆÙ† Ø§Ù„Ø­Ù„Ù‚ Ø§Ù„ÙƒØ§Ù…Ù„ Ø£Ùˆ Ø§Ù„ØªÙ‚ØµÙŠØ±","Ø§Ù„Ù†Ø³Ø§Ø¡ ØªÙ‚Øµ Ø¨Ø·ÙˆÙ„ Ø£Ù†Ù…Ù„Ø©","Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¹Ù…Ø±Ø© Ø±Ø³Ù…ÙŠØ§Ù‹","Ø§Ù†ØªÙ‡Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø­Ø±Ø§Ù… ÙˆØ±ÙØ¹ Ø§Ù„Ù…Ø­Ø¸ÙˆØ±Ø§Øª"],dua:{arabic:"Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ù‚ÙØ¶ÙÙ‰ Ø¹ÙÙ†ÙÙ‘Ø§ Ù†ÙØ³ÙÙƒÙÙ†ÙØ§",phonetic:"Al-á¸¥amdu li-LlÄhi lladhÄ« qaá¸Ä 'annÄ nusukanÄ",translation:"Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ Ù‚Ø¶Ù‰ Ø¹Ù†Ø§ Ù†Ø³ÙƒÙ†Ø§"}}]};
function selectLang(lang){S.lang=lang;S.showLangSelector=false;localStorage.setItem('appLang',lang);L=lang;R()}
function R(){document.getElementById('app').innerHTML=rApp()}
function rApp(){if(S.showLangSelector)return rLangSelector();if(!S.userType)return rInit();if(!S.currentGroup&&!S.groupCode)return rJoin(T[L]);return rMain()}
function rLangSelector(){return `<div class="language-selector-screen"><div class="kaaba-icon">ğŸ•‹</div><h1>${T.fr.welcome}</h1><p>${T.fr.selectLanguage}</p><div class="lang-grid"><div class="lang-option" onclick="selectLang('fr')"><div class="flag">ğŸ‡«ğŸ‡·</div><div class="lang-name">FranÃ§ais</div></div><div class="lang-option" onclick="selectLang('en')"><div class="flag">ğŸ‡¬ğŸ‡§</div><div class="lang-name">English</div></div><div class="lang-option" onclick="selectLang('ar')"><div class="flag">ğŸ‡¸ğŸ‡¦</div><div class="lang-name">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div></div><div class="lang-option" onclick="selectLang('es')"><div class="flag">ğŸ‡ªğŸ‡¸</div><div class="lang-name">EspaÃ±ol</div></div></div></div>`}
function rInit(){const t=T[L];return `<div class="container"><div class="card"><h1 style="margin-bottom:30px">ğŸ•‹ ${t.appTitle}</h1><div class="icon-circle" style="font-size:60px;margin-bottom:30px">ğŸ“±</div><h2 style="text-align:center;margin-bottom:30px;color:#fff">${t.userType}</h2><button class="btn-primary" onclick="setType('guide')">${t.guide}</button><button class="btn-primary" onclick="setType('pilgrim')">${t.pilgrims}</button></div></div>`}
function setType(type){S.userType=type;S.userName='';R()}
function rJoin(t){return `<div class="container"><div class="card"><button class="btn-secondary" onclick="goBack()" style="margin-bottom:20px">${t.back}</button><h2>${S.userType==='guide'?t.create:t.join}</h2>${S.userType==='guide'?`<label style="display:block;margin-bottom:8px;color:#cbd5e0;font-weight:600">${t.groupName}</label><input type="text" id="groupNameIn" placeholder="${t.enterGroupName}" style="margin-bottom:15px"><button class="btn-primary" onclick="createGrp()">${t.create}</button>`:`<p style="text-align:center;margin-bottom:20px;color:#cbd5e0">Entrez le code personnel fourni par votre guide</p><input type="text" id="codeIn" placeholder="${t.enterCode}" maxlength="6" style="text-transform:uppercase;text-align:center;font-size:24px;font-weight:bold"><button class="btn-primary" onclick="joinGrp()">${t.join}</button>`}</div></div>`}
function goBack(){S.userType=null;R()}
function createGrp(){const n=document.getElementById('groupNameIn')?.value;if(!n){alert('Veuillez entrer un nom pour le groupe');return}const existingPilgrims=localStorage.getItem('pilgrims');let c;if(!existingPilgrims||JSON.parse(existingPilgrims).length===0){c='DEMO01'}else{c=Math.random().toString(36).substring(2,8).toUpperCase()}S.currentGroup=c;S.groupCode=c;S.groupName=n;localStorage.setItem('groupName_'+c,n);const storedPilgrims=localStorage.getItem('pilgrims');if(storedPilgrims){S.pilgrims=JSON.parse(storedPilgrims).filter(p=>p.groupCode===c)}initDemo();R()}
function initDemo(){if(S.userType==='guide'&&S.currentGroup&&S.pilgrims.length===0){S.pilgrims=[{id:1,name:'Ahmed Ben Ali',hotel:'Hilton Makkah',room:'205',code:'ABC123',groupCode:S.currentGroup,photo:null,online:true,lat:21.4225,lng:39.8262,completedSteps:{1:true,2:true,3:false,4:false,5:false}},{id:2,name:'Fatima Zahra',hotel:'Hilton Makkah',room:'207',code:'DEF456',groupCode:S.currentGroup,photo:null,online:true,lat:21.4235,lng:39.8272,completedSteps:{1:true,2:true,3:true,4:true,5:false}},{id:3,name:'Mohammed Ibrahim',hotel:'Swissotel Makkah',room:'305',code:'GHI789',groupCode:S.currentGroup,photo:null,online:false,lat:21.4215,lng:39.8252,completedSteps:{1:true,2:false,3:false,4:false,5:false}},{id:4,name:'Khadija Nour',hotel:'Swissotel Makkah',room:'308',code:'JKL012',groupCode:S.currentGroup,photo:null,online:true,lat:21.4240,lng:39.8280,completedSteps:{1:true,2:true,3:true,4:true,5:true}}];localStorage.setItem('pilgrims',JSON.stringify(S.pilgrims));S.messages=[{id:1,title:'DÃ©part demain matin',content:'Rendez-vous Ã  6h dans le lobby',time:new Date(Date.now()-3600000)}];S.activities=[{id:1,name:'Visite MosquÃ©e du ProphÃ¨te',location:'MÃ©dine',time:'09:00',presence:{}},{id:2,name:'Tawaf de groupe',location:'Masjid al-Haram',time:'14:00',presence:{}}];S.questions=[{id:1,pilgrimName:'Ahmed Ben Ali',pilgrimId:1,question:'Je ne trouve pas mon groupe pour le Tawaf',time:new Date(Date.now()-1800000),answered:false,response:null}]}}
function joinGrp(){const c=document.getElementById('codeIn').value.toUpperCase();if(!c)return alert('Veuillez entrer un code');const storedPilgrims=localStorage.getItem('pilgrims');if(!storedPilgrims)return alert('Code invalide');const pilgrims=JSON.parse(storedPilgrims);const pilgrim=pilgrims.find(p=>p.code===c);if(!pilgrim)return alert('Code invalide');S.pilgrimCode=c;S.groupCode=pilgrim.groupCode;S.userName=pilgrim.name;S.userHotel=pilgrim.hotel;S.userRoom=pilgrim.room;S.userPhoto=pilgrim.photo;S.completedSteps=pilgrim.completedSteps||{};S.groupName=localStorage.getItem('groupName_'+pilgrim.groupCode)||'';R()}
function rMain(){if(!L)L='fr';const t=T[L],rts=RITES[L];let hdr='';if(S.userType==='pilgrim'){const prog=calcProg(S.completedSteps);hdr=`<div class="profile-section"><div class="profile-photo">${S.userPhoto?`<img src="${S.userPhoto}" alt="${S.userName}">`:getInit(S.userName||'User')}</div><h2 style="margin:0 0 5px 0;text-align:center;color:#fff">${S.userName}</h2>${S.userHotel||S.userRoom?`<p style="text-align:center;font-size:14px;color:#cbd5e0;margin:5px 0 10px 0;font-weight:500">${S.userHotel?`ğŸ¨ ${S.userHotel}`:''} ${S.userRoom?`â€¢ ğŸšª ${t.room} ${S.userRoom}`:''}</p>`:''}<div class="progress-bar" style="margin:10px 0"><div class="progress-fill" style="width:${prog}%"></div></div><p style="text-align:center;font-size:14px;font-weight:600;color:#15b886;margin:0">${getCnt(S.completedSteps)} / 5 ${t.stepsCompleted}</p></div>`}else{const unQ=S.questions.filter(q=>!q.answered).length;hdr=`<h1 style="margin-bottom:5px;color:#fff">${S.groupName||t.appTitle}</h1><p style="text-align:center;color:#cbd5e0">${t.guide}</p>${unQ>0?`<div style="text-align:center;margin-top:15px"><button class="btn-warning btn-small" onclick="shwQs()">${t.questions} <span class="badge badge-warning" style="margin-left:5px">${unQ}</span></button></div>`:''}`}let tabs='';if(S.userType==='guide'){tabs=`<button class="tab ${S.activeTab==='rites'?'active':''}" onclick="S.activeTab='rites';R()">${t.rites}</button><button class="tab ${S.activeTab==='progress'?'active':''}" onclick="S.activeTab='progress';R()">${t.progress}</button><button class="tab ${S.activeTab==='messages'?'active':''}" onclick="S.activeTab='messages';R()">${t.messages}</button><button class="tab ${S.activeTab==='rooms'?'active':''}" onclick="S.activeTab='rooms';R()">${t.rooms}</button><button class="tab ${S.activeTab==='map'?'active':''}" onclick="S.activeTab='map';R()">${t.map}</button><button class="tab ${S.activeTab==='presence'?'active':''}" onclick="S.activeTab='presence';R()">${t.presence}</button>`}else{tabs=`<button class="tab ${S.activeTab==='rites'?'active':''}" onclick="S.activeTab='rites';R()">${t.rites}</button><button class="tab ${S.activeTab==='detailed'?'active':''}" onclick="S.activeTab='detailed';R()">${t.detailedGuide}</button><button class="tab ${S.activeTab==='guide'?'active':''}" onclick="S.activeTab='guide';R()">${t.guideLocation}</button><button class="tab ${S.activeTab==='activities'?'active':''}" onclick="S.activeTab='activities';R()">${t.activities}</button><button class="tab ${S.activeTab==='questions'?'active':''}" onclick="S.activeTab='questions';R()">${t.questions}</button>`}return `<div class="header">${hdr}${S.userType==='guide'?`<div class="code-display">${S.currentGroup}</div><p style="text-align:center;font-size:12px;color:#cbd5e0">${t.shareCode}</p>`:''}</div><div class="tab-bar">${tabs}</div><div class="container">${rTab(t,L,rts)}</div>`}
function rTab(t,L,rts){if(S.viewQuestions)return rQuestionsView(t);if(S.viewPilgrimProgress!==null)return rPilgrimProgressView(t);if(S.showEditPilgrim)return rEditPilgrim(t);switch(S.activeTab){case 'rites':return rRites(t,rts);case 'detailed':return rDetailed(t,L);case 'progress':return rProg(t);case 'guide':return rGuideLoc(t);case 'activities':return rMyActs(t);case 'questions':return rMyQs(t);case 'messages':return rMsgs(t);case 'rooms':return rRooms(t);case 'map':return rMap(t);case 'presence':return rPresence(t);default:return ''}}
function rRites(t,rts){const isP=S.userType==='pilgrim';return `<h2 style="margin-bottom:20px;color:#fff">${t.rites}</h2>${rts.map((r,i)=>{const done=isP&&S.completedSteps&&S.completedSteps[r.id];return `<div class="rite-item ${done?'completed':''}"><div class="rite-header" onclick="togRite(${r.id})"><div style="display:flex;align-items:center;flex:1"><div class="rite-number ${done?'completed':''}">$ {i+1}</div><div style="flex:1"><h3 style="margin:0;color:#fff">${r.title}</h3><p style="margin:5px 0 0 0;font-size:14px;color:#cbd5e0">${r.description}</p>${isP?`<p style="margin:5px 0 0 0;font-size:13px;font-weight:600;color:${done?'#15b886':'#a0aec0'}">${done?t.completed:t.notStarted}</p>`:''}</div></div><div style="font-size:24px;color:#15b886">${S.expandedRite===r.id?'âˆ’':'+'}</div></div>${S.expandedRite===r.id?`<div class="rite-content"><h3 style="color:#fff">${t.steps}</h3><ol>${r.steps.map(s=>`<li>${s}</li>`).join('')}</ol><h3 style="margin-top:20px;color:#fff">${t.invocation}</h3><div class="dua-box"><div class="arabic-text">${r.dua.arabic}</div></div><div class="dua-box"><span style="font-weight:600;color:#cbd5e0;font-size:14px;display:block;margin-bottom:8px">${t.phonetic}</span><div class="phonetic-text">${r.dua.phonetic}</div></div><div class="dua-box"><span style="font-weight:600;color:#cbd5e0;font-size:14px;display:block;margin-bottom:8px">${t.translation}</span><div class="translation-text">${r.dua.translation}</div></div>${isP&&r.id!==2&&r.id!==4?`<div style="margin-top:20px"><button class="${done?'btn-success':'btn-primary'}" onclick="compStp(${r.id})">${done?t.completed:t.markComplete}</button></div>`:''}${r.id===2?`<div style="margin-top:20px;background:rgba(26,95,71,0.3);padding:20px;border-radius:15px;border:2px solid #15b886"><h3 style="text-align:center;color:#fff">${t.counter}</h3><div class="counter-circle"><div class="counter-number">${S.tawafCount}</div></div><p style="text-align:center;font-weight:600;margin-bottom:15px;color:#cbd5e0">${t.round} ${S.tawafCount}/7</p>${S.tawafCount<7?`<button class="btn-primary" onclick="incTaw()">+ 1 ${t.round}</button>`:`<div class="success-box"><div class="success-text">${t.tawafComplete}</div></div><button class="btn-secondary" onclick="rstTaw()" style="margin-top:10px">${t.reset}</button>`}</div>`:''}${r.id===4?`<div style="margin-top:20px;background:rgba(26,95,71,0.3);padding:20px;border-radius:15px;border:2px solid #15b886"><h3 style="text-align:center;color:#fff">${t.counter}</h3><div class="counter-circle"><div class="counter-number">${S.saiCount}</div></div><p style="text-align:center;font-weight:600;margin-bottom:15px;color:#cbd5e0">${t.trip} ${S.saiCount}/7</p>${S.saiCount<7?`<button class="btn-primary" onclick="incSai()">+ 1 ${t.trip}</button>`:`<div class="success-box"><div class="success-text">${t.saiComplete}</div></div><button class="btn-secondary" onclick="rstSai()" style="margin-top:10px">${t.reset}</button>`}</div>`:''}</div>`:''}</div>`}).join('')}`}
function rDetailed(t,L){const rts=RITES[L];return `<h2 style="margin-bottom:20px;color:#fff">${t.detailedGuide}</h2>${rts.map((r,i)=>`<div class="card"><h3 style="color:#15b886;margin-bottom:15px">${i+1}. ${r.title}</h3><p style="color:#cbd5e0;margin-bottom:15px">${r.description}</p><h4 style="color:#e2e8f0;font-size:16px;margin-bottom:10px">${t.steps}</h4><ol>${r.steps.map(s=>`<li style="color:#cbd5e0">${s}</li>`).join('')}</ol><div class="dua-box"><div class="arabic-text">${r.dua.arabic}</div><div class="phonetic-text">${r.dua.phonetic}</div><div class="translation-text">${r.dua.translation}</div></div></div>`).join('')}`}
function rProg(t){return `<h2 style="margin-bottom:20px;color:#fff">${t.progress}</h2>${S.pilgrims.length===0?`<p style="color:#cbd5e0">${t.noPilgrims}</p>`:S.pilgrims.map(p=>{const pc=calcProg(p.completedSteps||{});return `<div class="pilgrim-item"><div class="flex-between"><div style="flex:1"><h3 style="margin:0;color:#fff">${p.name}</h3><p style="margin:5px 0 0 0;font-size:14px;color:#cbd5e0">${p.hotel} - ${t.room} ${p.room}</p></div><button class="btn-small btn-secondary" onclick="viewProg(${p.id})">${t.viewProgress}</button></div><div class="progress-bar" style="margin:10px 0"><div class="progress-fill" style="width:${pc}%"></div></div><p style="text-align:center;font-size:13px;font-weight:600;color:#15b886">${getCnt(p.completedSteps||{})} / 5 ${t.stepsCompleted}</p></div>`}).join('')}`}
function rMsgs(t){return `<div class="flex-between" style="margin-bottom:20px"><h2 style="color:#fff;margin:0">${t.messages}</h2><button class="btn-small btn-primary" onclick="S.showAddMessage=true;R()">+ ${t.addMessage}</button></div>${S.showAddMessage?`<div class="card"><input type="text" id="msgTitle" placeholder="${t.messageTitle}"><textarea id="msgContent" placeholder="${t.messageContent}"></textarea><div class="flex-row"><button class="btn-primary" onclick="addMsg()">${t.send}</button><button class="btn-secondary" onclick="S.showAddMessage=false;R()">${t.cancel}</button></div></div>`:''}<div>${S.messages.length===0?`<p style="color:#cbd5e0">${t.noMessages}</p>`:S.messages.map(m=>`<div class="message-item"><h3 style="color:#fff">${m.title}</h3><p style="color:#cbd5e0">${m.content}</p><p class="message-time">${new Date(m.time).toLocaleString()}</p>${S.userType==='guide'?`<button class="btn-danger btn-small" style="margin-top:10px" onclick="delMsg(${m.id})">${t.delete}</button>`:''}</div>`).join('')}</div>`}
function rRooms(t){return `<div class="flex-between" style="margin-bottom:20px"><h2 style="color:#fff;margin:0">${t.rooms}</h2><button class="btn-small btn-primary" onclick="S.showAddPilgrim=true;R()">+ ${t.addPilgrim}</button></div>${S.showAddPilgrim?`<div class="card"><input type="text" id="pilName" placeholder="${t.pilgrimName}"><input type="text" id="pilHotel" placeholder="${t.hotel}"><input type="text" id="pilRoom" placeholder="${t.roomNumber}"><div class="flex-row"><button class="btn-primary" onclick="addPil()">${t.save}</button><button class="btn-secondary" onclick="S.showAddPilgrim=false;R()">${t.cancel}</button></div></div>`:''}<div>${S.pilgrims.length===0?`<p style="color:#cbd5e0">${t.noPilgrims}</p>`:S.pilgrims.map(p=>`<div class="pilgrim-item"><div class="flex-between" style="margin-bottom:10px"><div style="flex:1"><h3 style="margin:0;color:#fff">${p.name}</h3><p style="margin:5px 0 0 0;font-size:14px;color:#cbd5e0">ğŸ¨ ${p.hotel} â€¢ ğŸšª ${t.room} ${p.room}</p><p style="margin:5px 0 0 0;font-size:13px;color:#a0aec0">Code: <span style="font-family:monospace;font-weight:bold">${p.code}</span></p></div><div class="flex-row" style="gap:5px"><button class="btn-small btn-secondary" onclick="editPil(${p.id})">âœï¸</button><button class="btn-small btn-danger" onclick="delPil(${p.id})">ğŸ—‘ï¸</button></div></div><button class="btn-whatsapp" onclick="sendWhatsApp(${JSON.stringify(p).replace(/'/g,"\\'")})">ğŸ“± ${t.sendWhatsApp}</button></div>`).join('')}</div>`}
function rGuideLoc(t){const dist=calcDist(S.guideLocation.lat,S.guideLocation.lng,21.4225,39.8262);return `<h2 style="margin-bottom:20px;color:#fff">${t.guideLocation}</h2><div class="guide-location-card"><div class="distance-display">${Math.round(dist*1000)} ${t.meters}</div><p style="text-align:center;color:#cbd5e0;margin-bottom:15px">${t.guideDistance}</p><button class="btn-primary" onclick="alert('Fonction GPS Ã  venir')">${t.findGuide}</button></div><div class="map-placeholder"><p style="color:#fff;font-size:18px">ğŸ—ºï¸ Carte interactive</p></div>`}
function rMap(t){return `<h2 style="margin-bottom:20px;color:#fff">${t.map}</h2><div class="map-placeholder"><p style="color:#fff;font-size:18px;text-align:center">ğŸ—ºï¸ ${t.map} ${t.guideLocation}</p></div>`}
function rMyActs(t){return `<h2 style="margin-bottom:20px;color:#fff">${t.myActivities}</h2>${S.activities.length===0?`<p style="color:#cbd5e0">${t.noActivities}</p>`:S.activities.map(a=>`<div class="activity-item"><h3 style="color:#fff">${a.name}</h3><p style="color:#cbd5e0">ğŸ“ ${a.location} â€¢ ğŸ• ${a.time}</p><button class="btn-primary" style="margin-top:10px" onclick="valPres(${a.id})">${t.validatePresence}</button></div>`).join('')}`}
function rMyQs(t){return `<div class="flex-between" style="margin-bottom:20px"><h2 style="color:#fff;margin:0">${t.yourQuestions}</h2><button class="btn-small btn-primary" onclick="S.showAskQuestion=true;R()">+ ${t.askQuestion}</button></div>${S.showAskQuestion?`<div class="card"><textarea id="qContent" placeholder="${t.questionPlaceholder}"></textarea><div class="flex-row"><button class="btn-primary" onclick="askQ()">${t.send}</button><button class="btn-secondary" onclick="S.showAskQuestion=false;R()">${t.cancel}</button></div></div>`:''}<div>${S.questions.filter(q=>q.pilgrimId===(S.pilgrims.find(p=>p.code===S.pilgrimCode)?.id)||0).length===0?`<p style="color:#cbd5e0">${t.noQuestions}</p>`:S.questions.filter(q=>q.pilgrimId===(S.pilgrims.find(p=>p.code===S.pilgrimCode)?.id)||0).map(q=>`<div class="question-item"><p style="color:#cbd5e0;margin-bottom:10px">${q.question}</p><span class="badge ${q.answered?'badge-success':'badge-warning'}">${q.answered?t.answered:t.awaitingResponse}</span><p class="message-time">${new Date(q.time).toLocaleString()}</p>${q.answered?`<div class="question-response"><strong style="color:#15b886">${t.response}:</strong><p style="color:#cbd5e0;margin:5px 0 0 0">${q.response}</p></div>`:''}</div>`).join('')}</div>`}
function rPresence(t){return `<h2 style="margin-bottom:20px;color:#fff">${t.markPresence}</h2>${S.activities.length===0?`<p style="color:#cbd5e0">${t.noActivities}</p>`:S.activities.map(a=>`<div class="activity-item"><h3 style="color:#fff">${a.name}</h3><p style="color:#cbd5e0">ğŸ“ ${a.location} â€¢ ğŸ• ${a.time}</p><div style="margin-top:15px">${S.pilgrims.map(p=>`<div class="checkbox-item"><input type="checkbox" id="pres_${a.id}_${p.id}" ${a.presence[p.id]?'checked':''}  onchange="togPres(${a.id},${p.id})"><span>${p.name}</span></div>`).join('')}</div><p style="margin-top:10px;text-align:center;font-weight:600;color:#15b886">${Object.values(a.presence).filter(v=>v).length} ${t.presenceCount}</p></div>`).join('')}`}
function rQuestionsView(t){return `<button class="btn-secondary" style="margin-bottom:20px" onclick="S.viewQuestions=false;R()">${t.back}</button><h2 style="margin-bottom:20px;color:#fff">${t.pilgrimsQuestions}</h2>${S.questions.length===0?`<p style="color:#cbd5e0">${t.noQuestions}</p>`:S.questions.map(q=>`<div class="question-item"><div class="flex-between" style="margin-bottom:10px"><h3 style="margin:0;color:#fff">${q.pilgrimName}</h3><span class="badge ${q.answered?'badge-success':'badge-warning'}">${q.answered?t.answered:t.awaitingResponse}</span></div><p style="color:#cbd5e0;margin-bottom:10px">${q.question}</p><p class="message-time">${new Date(q.time).toLocaleString()}</p>${q.answered?`<div class="question-response"><p style="color:#cbd5e0">${q.response}</p></div>`:`<div style="margin-top:10px"><textarea id="resp_${q.id}" placeholder="${t.response}..."></textarea><button class="btn-primary" onclick="ansQ(${q.id})">${t.answer}</button></div>`}</div>`).join('')}`}
function rPilgrimProgressView(t){const p=S.pilgrims.find(p=>p.id===S.viewPilgrimProgress);if(!p)return '';const rts=RITES[L];return `<button class="btn-secondary" style="margin-bottom:20px" onclick="S.viewPilgrimProgress=null;R()">${t.back}</button><h2 style="margin-bottom:20px;color:#fff">${t.pilgrimProgress}: ${p.name}</h2><div class="card"><div class="progress-bar" style="margin:20px 0"><div class="progress-fill" style="width:${calcProg(p.completedSteps||{})}%"></div></div><p style="text-align:center;font-weight:600;color:#15b886;font-size:18px">${getCnt(p.completedSteps||{})} / 5 ${t.stepsCompleted}</p></div>${rts.map((r,i)=>{const done=p.completedSteps&&p.completedSteps[r.id];return `<div class="rite-item ${done?'completed':''}"><div style="display:flex;align-items:center;padding:5px 0"><div class="rite-number ${done?'completed':''}">${i+1}</div><div style="flex:1"><h3 style="margin:0;color:#fff">${r.title}</h3><p style="margin:5px 0 0 0;font-size:13px;font-weight:600;color:${done?'#15b886':'#a0aec0'}">${done?t.completed:t.notStarted}</p></div></div></div>`}).join('')}`}
function rEditPilgrim(t){const p=S.pilgrims.find(p=>p.id===S.editPilgrimId);if(!p)return '';return `<button class="btn-secondary" style="margin-bottom:20px" onclick="S.showEditPilgrim=false;S.editPilgrimId=null;R()">${t.back}</button><h2 style="margin-bottom:20px;color:#fff">${t.edit} ${t.pilgrims}</h2><div class="card"><input type="text" id="editName" value="${p.name}" placeholder="${t.pilgrimName}"><input type="text" id="editHotel" value="${p.hotel}" placeholder="${t.hotel}"><input type="text" id="editRoom" value="${p.room}" placeholder="${t.roomNumber}"><button class="btn-primary" onclick="savePilEdit()">${t.save}</button></div>`}
function togRite(id){S.expandedRite=S.expandedRite===id?null:id;R()}
function compStp(id){S.completedSteps[id]=true;const p=S.pilgrims.find(p=>p.code===S.pilgrimCode);if(p){p.completedSteps=S.completedSteps;localStorage.setItem('pilgrims',JSON.stringify(S.pilgrims))}R()}
function incTaw(){if(S.tawafCount<7){S.tawafCount++;if(S.tawafCount===7){S.completedSteps[2]=true;const p=S.pilgrims.find(p=>p.code===S.pilgrimCode);if(p){p.completedSteps=S.completedSteps;localStorage.setItem('pilgrims',JSON.stringify(S.pilgrims))}}}R()}
function rstTaw(){S.tawafCount=0;S.completedSteps[2]=false;const p=S.pilgrims.find(p=>p.code===S.pilgrimCode);if(p){p.completedSteps=S.completedSteps;localStorage.setItem('pilgrims',JSON.stringify(S.pilgrims))}R()}
function incSai(){if(S.saiCount<7){S.saiCount++;if(S.saiCount===7){S.completedSteps[4]=true;const p=S.pilgrims.find(p=>p.code===S.pilgrimCode);if(p){p.completedSteps=S.completedSteps;localStorage.setItem('pilgrims',JSON.stringify(S.pilgrims))}}}R()}
function rstSai(){S.saiCount=0;S.completedSteps[4]=false;const p=S.pilgrims.find(p=>p.code===S.pilgrimCode);if(p){p.completedSteps=S.completedSteps;localStorage.setItem('pilgrims',JSON.stringify(S.pilgrims))}R()}
function getCnt(c){if(!c)return 0;return Object.values(c).filter(v=>v).length}
function calcProg(c){return Math.round((getCnt(c)/5)*100)}
function getInit(n){return n.split(' ').map(x=>x[0]).join('').toUpperCase().substring(0,2)}
function addMsg(){const title=document.getElementById('msgTitle').value;const content=document.getElementById('msgContent').value;if(!title||!content)return alert('Remplissez tous les champs');S.messages.push({id:Date.now(),title,content,time:new Date()});S.showAddMessage=false;R()}
function delMsg(id){if(confirm('Supprimer ce message ?')){S.messages=S.messages.filter(m=>m.id!==id);R()}}
function addPil(){const name=document.getElementById('pilName').value;const hotel=document.getElementById('pilHotel').value;const room=document.getElementById('pilRoom').value;if(!name||!hotel||!room)return alert('Remplissez tous les champs');const code=Math.random().toString(36).substring(2,8).toUpperCase();S.pilgrims.push({id:Date.now(),name,hotel,room,code,groupCode:S.currentGroup,photo:null,online:false,lat:21.4225,lng:39.8262,completedSteps:{}});localStorage.setItem('pilgrims',JSON.stringify(S.pilgrims));S.showAddPilgrim=false;R()}
function editPil(id){S.editPilgrimId=id;S.showEditPilgrim=true;R()}
function savePilEdit(){const name=document.getElementById('editName').value;const hotel=document.getElementById('editHotel').value;const room=document.getElementById('editRoom').value;if(!name||!hotel||!room)return alert('Remplissez tous les champs');const p=S.pilgrims.find(p=>p.id===S.editPilgrimId);if(p){p.name=name;p.hotel=hotel;p.room=room;localStorage.setItem('pilgrims',JSON.stringify(S.pilgrims))}S.showEditPilgrim=false;S.editPilgrimId=null;R()}
function delPil(id){if(confirm('Supprimer ce pÃ¨lerin ?')){S.pilgrims=S.pilgrims.filter(p=>p.id!==id);localStorage.setItem('pilgrims',JSON.stringify(S.pilgrims));R()}}
function sendWhatsApp(p){const msg=`ğŸ•‹ *${S.groupName||'Groupe Oumrah'}*

Salam ${p.name},

Votre code personnel pour l'application Oumrah :
*${p.code}*

H´tel: ${p.hotel}
Chambre: ${p.room}

Utilisez ce code pour vous connecter Ã  l'application.

Qu'Allah accepte votre Oumrah ! ğŸ¤²`;window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`,'_blank')}
function valPres(actId){const a=S.activities.find(a=>a.id===actId);if(a){const pilId=S.pilgrims.find(p=>p.code===S.pilgrimCode)?.id;if(pilId){if(!a.presence)a.presence={};a.presence[pilId]=true}}R()}
function togPres(actId,pilId){const a=S.activities.find(a=>a.id===actId);if(a){if(!a.presence)a.presence={};a.presence[pilId]=!a.presence[pilId]}R()}
function askQ(){const content=document.getElementById('qContent').value;if(!content)return alert('Posez votre question');const pilId=S.pilgrims.find(p=>p.code===S.pilgrimCode)?.id;const pilName=S.pilgrims.find(p=>p.code===S.pilgrimCode)?.name;if(!pilId)return;S.questions.push({id:Date.now(),pilgrimId:pilId,pilgrimName:pilName,question:content,time:new Date(),answered:false,response:null});S.showAskQuestion=false;R()}
function shwQs(){S.viewQuestions=true;R()}
function ansQ(qId){const resp=document.getElementById('resp_'+qId).value;if(!resp)return alert('Entrez une rÃ©ponse');const q=S.questions.find(q=>q.id===qId);if(q){q.answered=true;q.response=resp}R()}
function viewProg(id){S.viewPilgrimProgress=id;R()}
function calcDist(lat1,lon1,lat2,lon2){const R=6371;const dLat=(lat2-lat1)*Math.PI/180;const dLon=(lon2-lon1)*Math.PI/180;const a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return R*c}
R();
</script>
</body>
</html>
    <script>
        // Ã‰tat de l'application
        let state = {
            language: 'fr',
            userType: null,
            groupCode: '',
            currentGroup: null,
            activeTab: 'rites',
            expandedRite: null,
            tawafCount: 0,
            saiCount: 0,
            menuOpen: false
        };

        // DonnÃ©es des rites
        const rites = {
            fr: [
                {
                    id: 1,
                    title: "Ihram",
                    description: "Ã‰tat de sacralisation avant d'entrer dans les lieux saints",
                    steps: [
                        "Se purifier (ghusl) et porter les vÃªtements d'Ihram",
                        "Formuler l'intention (niyyah) pour la Oumrah",
                        "RÃ©citer la Talbiyah"
                    ],
                    dua: {
                        arabic: "Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙØŒ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙƒÙ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙØŒ Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙØ§Ù„Ù†ÙÙ‘Ø¹Ù’Ù…ÙØ©Ù Ù„ÙÙƒÙ ÙˆÙØ§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙØŒ Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙƒÙ",
                        phonetic: "Labbayka AllÄhumma labbayk, labbayka lÄ sharÄ«ka laka labbayk, inna al-á¸¥amda wa n-niÊ¿mata laka wa l-mulk, lÄ sharÄ«ka lak",
                        translation: "Me voici, Ã” Allah, me voici. Me voici, Tu n'as pas d'associÃ©, me voici. Certes la louange, la grÃ¢ce et la royautÃ© T'appartiennent. Tu n'as pas d'associÃ©."
                    }
                },
                {
                    id: 2,
                    title: "Tawaf",
                    description: "Sept circumambulations autour de la Kaaba",
                    steps: [
                        "Commencer au niveau de la Pierre Noire (Hajar al-Aswad)",
                        "Effectuer 7 tours autour de la Kaaba dans le sens antihoraire",
                        "Toucher ou pointer la Pierre Noire Ã  chaque tour si possible",
                        "RÃ©citer les invocations pendant le Tawaf"
                    ],
                    dua: {
                        arabic: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù ÙˆÙÙ„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„Ù‡Ù ÙˆÙØ§Ù„Ù„Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù ÙˆÙÙ„ÙØ§ Ø­ÙÙˆÙ’Ù„Ù ÙˆÙÙ„ÙØ§ Ù‚ÙÙˆÙÙ‘Ø©Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø¨ÙØ§Ù„Ù„Ù‡Ù",
                        phonetic: "Subá¸¥Äna LlÄh, wa l-á¸¥amdu li-LlÄh, wa lÄ ilÄha illÄ LlÄh, wa LlÄhu akbar, wa lÄ á¸¥awla wa lÄ quwwata illÄ bi-LlÄh",
                        translation: "Gloire Ã  Allah, louange Ã  Allah, il n'y a de divinitÃ© qu'Allah, Allah est le Plus Grand, il n'y a de force ni de puissance qu'en Allah."
                    }
                },
                {
                    id: 3,
                    title: "PriÃ¨re de deux unitÃ©s",
                    description: "PriÃ¨re derriÃ¨re Maqam Ibrahim",
                    steps: [
                        "Se diriger vers Maqam Ibrahim aprÃ¨s le Tawaf",
                        "Accomplir deux rak'at (unitÃ©s de priÃ¨re)",
                        "RÃ©citer sourate Al-Kafirun dans la 1Ã¨re rak'a",
                        "RÃ©citer sourate Al-Ikhlas dans la 2Ã¨me rak'a"
                    ],
                    dua: {
                        arabic: "Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ ØªÙÙ‚ÙØ¨ÙÙ‘Ù„Ù’ Ù…ÙÙ†ÙÙ‘Ø§ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø£ÙÙ†Ù’ØªÙ Ø§Ù„Ø³ÙÙ‘Ù…ÙÙŠØ¹Ù Ø§Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù",
                        phonetic: "RabbanÄ taqabbal minnÄ innaka anta s-samÄ«Ê¿u l-Ê¿alÄ«m",
                        translation: "Notre Seigneur, accepte de nous, Tu es certes Celui qui entend et qui sait."
                    }
                },
                {
                    id: 4,
                    title: "Sa'i",
                    description: "Sept allers-retours entre Safa et Marwa",
                    steps: [
                        "Commencer Ã  Safa en regardant la Kaaba",
                        "Marcher vers Marwa (1er trajet)",
                        "Retourner vers Safa (2Ã¨me trajet)",
                        "RÃ©pÃ©ter jusqu'Ã  complÃ©ter 7 trajets (fin Ã  Marwa)"
                    ],
                    dua: {
                        arabic: "Ø¥ÙÙ†ÙÙ‘ Ø§Ù„ØµÙÙ‘ÙÙØ§ ÙˆÙØ§Ù„Ù’Ù…ÙØ±Ù’ÙˆÙØ©Ù Ù…ÙÙ†Ù’ Ø´ÙØ¹ÙØ§Ø¦ÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù",
                        phonetic: "Inna á¹£-á¹£afÄ wa l-marwata min shaÊ¿ÄÊ¾iri LlÄh",
                        translation: "Certes Safa et Marwa sont parmi les rites d'Allah."
                    }
                },
                {
                    id: 5,
                    title: "Taqsir ou Halq",
                    description: "Raccourcir ou raser les cheveux",
                    steps: [
                        "Les hommes peuvent raser (Halq) ou raccourcir (Taqsir) leurs cheveux",
                        "Les femmes coupent l'Ã©quivalent d'une phalange de leurs cheveux",
                        "Ceci marque la fin de la Oumrah",
                        "L'Ã©tat d'Ihram prend fin"
                    ],
                    dua: {
                        arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ù‚ÙØ¶ÙÙ‰ Ø¹ÙÙ†ÙÙ‘Ø§ Ù†ÙØ³ÙÙƒÙÙ†ÙØ§",
                        phonetic: "Al-á¸¥amdu li-LlÄhi lladhÄ« qaá¸Ä Ê¿annÄ nusukana",
                        translation: "Louange Ã  Allah qui nous a permis d'accomplir notre rite."
                    }
                }
            ],
            en: [
                {
                    id: 1,
                    title: "Ihram",
                    description: "State of consecration before entering the holy sites",
                    steps: [
                        "Perform purification (ghusl) and wear Ihram garments",
                        "Make intention (niyyah) for Umrah",
                        "Recite the Talbiyah"
                    ],
                    dua: {
                        arabic: "Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙØŒ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙ Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙƒÙ Ù„ÙØ¨ÙÙ‘ÙŠÙ’ÙƒÙØŒ Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙØ§Ù„Ù†ÙÙ‘Ø¹Ù’Ù…ÙØ©Ù Ù„ÙÙƒÙ ÙˆÙØ§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙØŒ Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙƒÙ",
                        phonetic: "Labbayka AllÄhumma labbayk, labbayka lÄ sharÄ«ka laka labbayk, inna al-á¸¥amda wa n-niÊ¿mata laka wa l-mulk, lÄ sharÄ«ka lak",
                        translation: "Here I am, O Allah, here I am. Here I am, You have no partner, here I am. Verily, all praise, grace and sovereignty belong to You. You have no partner."
                    }
                },
                {
                    id: 2,
                    title: "Tawaf",
                    description: "Seven circumambulations around the Kaaba",
                    steps: [
                        "Start at the Black Stone (Hajar al-Aswad)",
                        "Perform 7 circles around the Kaaba counterclockwise",
                        "Touch or point to the Black Stone each round if possible",
                        "Recite invocations during Tawaf"
                    ],
                    dua: {
                        arabic: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù ÙˆÙÙ„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„Ù‡Ù ÙˆÙØ§Ù„Ù„Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù ÙˆÙÙ„ÙØ§ Ø­ÙÙˆÙ’Ù„Ù ÙˆÙÙ„ÙØ§ Ù‚ÙÙˆÙÙ‘Ø©Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø¨ÙØ§Ù„Ù„Ù‡Ù",
                        phonetic: "Subá¸¥Äna LlÄh, wa l-á¸¥amdu li-LlÄh, wa lÄ ilÄha illÄ LlÄh, wa LlÄhu akbar, wa lÄ á¸¥awla wa lÄ quwwata illÄ bi-LlÄh",
                        translation: "Glory be to Allah, praise be to Allah, there is no god but Allah, Allah is the Greatest, there is no power nor strength except with Allah."
                    }
                },
                {
                    id: 3,
                    title: "Two units prayer",
                    description: "Prayer behind Maqam Ibrahim",
                    steps: [
                        "Go to Maqam Ibrahim after Tawaf",
                        "Perform two rak'at (prayer units)",
                        "Recite Surah Al-Kafirun in the 1st rak'a",
                        "Recite Surah Al-Ikhlas in the 2nd rak'a"
                    ],
                    dua: {
                        arabic: "Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ ØªÙÙ‚ÙØ¨ÙÙ‘Ù„Ù’ Ù…ÙÙ†ÙÙ‘Ø§ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø£ÙÙ†Ù’ØªÙ Ø§Ù„Ø³ÙÙ‘Ù…ÙÙŠØ¹Ù Ø§Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù",
                        phonetic: "RabbanÄ taqabbal minnÄ innaka anta s-samÄ«Ê¿u l-Ê¿alÄ«m",
                        translation: "Our Lord, accept from us. Indeed, You are the Hearing, the Knowing."
                    }
                },
                {
                    id: 4,
                    title: "Sa'i",
                    description: "Seven trips between Safa and Marwa",
                    steps: [
                        "Start at Safa facing the Kaaba",
                        "Walk to Marwa (1st trip)",
                        "Return to Safa (2nd trip)",
                        "Repeat until completing 7 trips (ending at Marwa)"
                    ],
                    dua: {
                        arabic: "Ø¥ÙÙ†ÙÙ‘ Ø§Ù„ØµÙÙ‘ÙÙØ§ ÙˆÙØ§Ù„Ù’Ù…ÙØ±Ù’ÙˆÙØ©Ù Ù…ÙÙ†Ù’ Ø´ÙØ¹ÙØ§Ø¦ÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù",
                        phonetic: "Inna á¹£-á¹£afÄ wa l-marwata min shaÊ¿ÄÊ¾iri LlÄh",
                        translation: "Indeed, Safa and Marwa are among the symbols of Allah."
                    }
                },
                {
                    id: 5,
                    title: "Taqsir or Halq",
                    description: "Shortening or shaving the hair",
                    steps: [
                        "Men can shave (Halq) or shorten (Taqsir) their hair",
                        "Women cut the equivalent of a fingertip from their hair",
                        "This marks the end of Umrah",
                        "The state of Ihram ends"
                    ],
                    dua: {
                        arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ù‚ÙØ¶ÙÙ‰ Ø¹ÙÙ†ÙÙ‘Ø§ Ù†ÙØ³ÙÙƒÙÙ†ÙØ§",
                        phonetic: "Al-á¸¥amdu li-LlÄhi lladhÄ« qaá¸Ä Ê¿annÄ nusukana",
                        translation: "Praise be to Allah who enabled us to complete our ritual."
                    }
                }
            ]
        };

        const t = {
            fr: {
                appTitle: "Gestion Groupe Oumrah",
                guide: "Guide",
                pilgrims: "PÃ¨lerins",
                userType: "Choisissez votre rÃ´le",
                create: "CrÃ©er un groupe",
                join: "Rejoindre",
                enterCode: "Entrez le code du groupe",
                yourCode: "Votre code de groupe :",
                shareCode: "Partagez ce code avec vos pÃ¨lerins",
                rites: "Rites",
                steps: "Ã‰tapes",
                invocation: "Invocation",
                phonetic: "PhonÃ©tique",
                translation: "Traduction",
                counter: "Compteur",
                round: "Tour",
                trip: "Trajet",
                reset: "RÃ©initialiser",
                tawafComplete: "Tawaf terminÃ© ! 7 tours accomplis âœ“",
                saiComplete: "Sa'i terminÃ© ! 7 trajets accomplis âœ“",
                back: "â† Retour"
            },
            en: {
                appTitle: "Umrah Group Management",
                guide: "Guide",
                pilgrims: "Pilgrims",
                userType: "Choose your role",
                create: "Create group",
                join: "Join",
                enterCode: "Enter group code",
                yourCode: "Your group code:",
                shareCode: "Share this code with your pilgrims",
                rites: "Rites",
                steps: "Steps",
                invocation: "Invocation",
                phonetic: "Phonetic",
                translation: "Translation",
                counter: "Counter",
                round: "Round",
                trip: "Trip",
                reset: "Reset",
                tawafComplete: "Tawaf completed! 7 rounds done âœ“",
                saiComplete: "Sa'i completed! 7 trips done âœ“",
                back: "â† Back"
            }
        };

        // Fonctions de rendu
        function render() {
            const app = document.getElementById('app');
            const lang = state.language;
            const tr = t[lang];

            if (!state.userType) {
                app.innerHTML = `
                    <div class="container">
                        <div class="card">
                            <div class="icon-circle">
                                <svg width="32" height="32" fill="white" viewBox="0 0 24 24">
                                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                                </svg>
                            </div>
                            <h1>${tr.appTitle}</h1>
                            <p style="text-align: center; margin-bottom: 30px;">${tr.userType}</p>
                            
                            <button class="btn-primary" onclick="selectUserType('guide')">${tr.guide}</button>
                            <button class="btn-secondary" onclick="selectUserType('pilgrim')">${tr.pilgrims}</button>
                            
                            <div style="text-align: center; margin-top: 20px;">
                                <select onchange="changeLanguage(this.value)" style="width: auto; display: inline-block;">
                                    <option value="fr" ${lang === 'fr' ? 'selected' : ''}>FranÃ§ais</option>
                                    <option value="en" ${lang === 'en' ? 'selected' : ''}>English</option>
                                </select>
                            </div>
                        </div>
                    </div>
                `;
            } else if (!state.currentGroup) {
                app.innerHTML = `
                    <div class="container">
                        <div class="card">
                            <button class="btn-secondary" onclick="goBack()" style="margin-bottom: 20px;">${tr.back}</button>
                            <h2>${state.userType === 'guide' ? tr.create : tr.join}</h2>
                            
                            ${state.userType === 'guide' ? `
                                <button class="btn-primary" onclick="createGroup()">${tr.create}</button>
                            ` : `
                                <input type="text" id="codeInput" placeholder="${tr.enterCode}" maxlength="6" style="text-transform: uppercase; text-align: center; font-size: 20px;">
                                <button class="btn-primary" onclick="joinGroup()">${tr.join}</button>
                            `}
                        </div>
                    </div>
                `;
            } else {
                const currentRites = rites[lang];
                app.innerHTML = `
                    <div class="header">
                        <h1 style="margin-bottom: 5px;">${tr.appTitle}</h1>
                        <p style="text-align: center; color: #6b7280;">${state.userType === 'guide' ? tr.guide : tr.pilgrims}</p>
                        <div class="code-display">${state.currentGroup}</div>
                        <p style="text-align: center; font-size: 12px; color: #6b7280;">${tr.shareCode}</p>
                        <div style="text-align: center; margin-top: 15px;">
                            <select onchange="changeLanguage(this.value)" style="width: auto; display: inline-block;">
                                <option value="fr" ${lang === 'fr' ? 'selected' : ''}>FranÃ§ais</option>
                                <option value="en" ${lang === 'en' ? 'selected' : ''}>English</option>
                            </select>
                        </div>
                    </div>

                    <div class="container">
                        <h2 style="margin-bottom: 20px;">${tr.rites}</h2>
                        ${currentRites.map((rite, index) => `
                            <div class="rite-item">
                                <div class="rite-header" onclick="toggleRite(${rite.id})">
                                    <div style="display: flex; align-items: center; flex: 1;">
                                        <div class="rite-number">${index + 1}</div>
                                        <div>
                                            <h3 style="margin: 0;">${rite.title}</h3>
                                            <p style="margin: 5px 0 0 0; font-size: 14px;">${rite.description}</p>
                                        </div>
                                    </div>
                                    <div style="font-size: 24px; color: #059669;">${state.expandedRite === rite.id ? 'âˆ’' : '+'}</div>
                                </div>
                                
                                <div class="rite-content ${state.expandedRite === rite.id ? '' : 'hidden'}">
                                    <h3>${tr.steps}</h3>
                                    <ol>
                                        ${rite.steps.map(step => `<li>${step}</li>`).join('')}
                                    </ol>
                                    
                                    <h3 style="margin-top: 20px;">${tr.invocation}</h3>
                                    
                                    <div class="dua-box">
                                        <div class="arabic-text">${rite.dua.arabic}</div>
                                    </div>
                                    
                                    <div class="dua-box">
                                        <span class="label">${tr.phonetic}</span>
                                        <div class="phonetic-text">${rite.dua.phonetic}</div>
                                    </div>
                                    
                                    <div class="dua-box">
                                        <span class="label">${tr.translation}</span>
                                        <div class="translation-text">${rite.dua.translation}</div>
                                    </div>
                                    
                                    ${rite.id === 2 ? `
                                        <div style="margin-top: 20px; background: white; padding: 20px; border-radius: 15px; border: 2px solid #059669;">
                                            <h3 style="text-align: center;">${tr.counter}</h3>
                                            <div class="counter-circle">
                                                <div class="counter-number">${state.tawafCount}</div>
                                            </div>
                                            <p style="text-align: center; font-weight: 600; margin-bottom: 15px;">${tr.round} ${state.tawafCount}/7</p>
                                            ${state.tawafCount < 7 ? `
                                                <button class="btn-primary" onclick="incrementTawaf()">+ 1 ${tr.round}</button>
                                            ` : `
                                                <div class="success-box">
                                                    <div class="success-text">${tr.tawafComplete}</div>
                                                </div>
                                                <button class="btn-reset" onclick="resetTawaf()">${tr.reset}</button>
                                            `}
                                        </div>
                                    ` : ''}
                                    
                                    ${rite.id === 4 ? `
                                        <div style="margin-top: 20px; background: white; padding: 20px; border-radius: 15px; border: 2px solid #059669;">
                                            <h3 style="text-align: center;">${tr.counter}</h3>
                                            <div class="counter-circle">
                                                <div class="counter-number">${state.saiCount}</div>
                                            </div>
                                            <p style="text-align: center; font-weight: 600; margin-bottom: 15px;">${tr.trip} ${state.saiCount}/7</p>
                                            ${state.saiCount < 7 ? `
                                                <button class="btn-primary" onclick="incrementSai()">+ 1 ${tr.trip}</button>
                                            ` : `
                                                <div class="success-box">
                                                    <div class="success-text">${tr.saiComplete}</div>
                                                </div>
                                                <button class="btn-reset" onclick="resetSai()">${tr.reset}</button>
                                            `}
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
        }

        // Fonctions d'interaction
        function selectUserType(type) {
            state.userType = type;
            render();
        }

        function changeLanguage(lang) {
            state.language = lang;
            render();
        }

        function goBack() {
            state.userType = null;
            state.currentGroup = null;
            state.groupCode = '';
            render();
        }

        function createGroup() {
            const code = Math.random().toString(36).substring(2, 8).toUpperCase();
            state.currentGroup = code;
            state.groupCode = code;
            render();
        }

        function joinGroup() {
            const input = document.getElementById('codeInput');
            if (input && input.value.length >= 6) {
                state.currentGroup = input.value.toUpperCase();
                render();
            }
        }

        function toggleRite(id) {
            state.expandedRite = state.expandedRite === id ? null : id;
            render();
        }

        function incrementTawaf() {
            if (state.tawafCount < 7) {
                state.tawafCount++;
                render();
            }
        }

        function resetTawaf() {
            state.tawafCount = 0;
            render();
        }

        function incrementSai() {
            if (state.saiCount < 7) {
                state.saiCount++;
                render();
            }
        }

        function resetSai() {
            state.saiCount = 0;
            render();
        }

        // Initialisation
        render();
    </script>
</body>
</html>
